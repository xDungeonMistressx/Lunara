<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <title>Lunara</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="leaflet-search.min.css" />
<style>
  /* Karte */
  #map { height: 100vh; width: 100vw; }

  /* ===== Suchfeld ===== */
  .leaflet-control-search {
    font-size: 16px;                  /* Schriftgr√∂√üe */
    max-width: 250px;                 /* breiteres Feld */
    background-color: #ffffff;        /* helles Feld */
    padding: 4px 6px;
    border-radius: 8px;               /* abgerundet */
    box-shadow: 0 2px 6px rgba(0,0,0,0.3); /* leichter Schatten */
  }

  .leaflet-control-search input {
    height: 32px;
    padding: 6px 10px;
    font-size: 15px;
    border: 2px solid #555;           /* dunklere Umrandung */
    border-radius: 6px;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .leaflet-control-search input:focus {
    border-color: #007bff;            /* blaue Umrandung beim Fokus */
    box-shadow: 0 0 5px rgba(0,123,255,0.5);
  }

.leaflet-control-search button {
  height: 32px;
  width: 32px;
  border-radius: 6px;
  border: 2px solid #555;
  background-color: #ffffff;
  cursor: pointer;
  display: flex;              /* zentriert die Lupe */
  align-items: center;
  justify-content: center;
  font-size: 18px;            /* Gr√∂√üe der Lupe */
  color: #555;                /* Farbe der Lupe */
}

/* Lupe einf√ºgen direkt ins Button-Span */
.leaflet-control-search button span {
  display: inline-block;
  font-size: 18px;
  line-height: 1;
}

.leaflet-control-search button span::before {
  content: "üîç";   /* Unicode-Lupe */
}

  .leaflet-control-search button:hover {
    background-color: #0056b3;        /* dunkler beim Hover */
  }

  /* ===== Layer-Auswahl ===== */
  .leaflet-control-layers {
    font-size: 15px;                  /* Schrift gr√∂√üer */
  }

  .leaflet-control-layers label {
    padding: 4px 8px;                 /* mehr Abstand */
  }

  .leaflet-control-layers input {
    width: 18px;
    height: 18px;                      /* gr√∂√üere Checkboxen */
  }

  /* Hover-Effekt f√ºr Layer-Auswahl */
  .leaflet-control-layers label:hover {
    background: #f0f0f0;              /* hellgrauer Hintergrund */
    border-radius: 4px;               /* sanft abgerundet */
    cursor: pointer;                  /* Hand-Symbol */
  }
</style>

</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="leaflet-search.min.js"></script>
  <script>
    // === Basis-Setup ===
    var w = 3840, h = 2160; // Bildgr√∂√üe anpassen!
    var bounds = [[0,0], [h, w]];

    var map = L.map('map', {
      crs: L.CRS.Simple,
      minZoom: -1
    });

    // === Hintergrund-Layer ===
    var terrain = L.imageOverlay('terrain.jpg', bounds);
    var politics = L.imageOverlay('grenzen.jpg', bounds);

    var baseMaps = {
      "Gel√§nde": terrain,
      "Politische Karte": politics
    };

    // === Kategorien-LayerGroups ===
    var categories = {
      "Orte": L.layerGroup(),
      "Gebiete": L.layerGroup(),
      "W√§lder": L.layerGroup(),
      "Gebirge": L.layerGroup(),
      "Gew√§sser": L.layerGroup(),
      "Routen": L.layerGroup()
    };

    var overlayMaps = {
      "Orte": categories["Orte"],
      "Gebiete": categories["Gebiete"],
      "W√§lder": categories["W√§lder"],
      "Gebirge": categories["Gebirge"],
      "Gew√§sser": categories["Gew√§sser"],
      "Routen": categories["Routen"]
    };

// === Marker erstellen ===
function createMarker(data) {
  var marker = L.circleMarker(data.coords, {
    radius: 8,
    color: 'black',
    weight: 2,
    fillColor: data.color,
    fillOpacity: 1
  }).bindPopup('<b>' + data.title + '</b><br>' + data.description);

  // statt "name" direkt "title" verwenden ‚Üí einfacher
  marker.feature = { properties: { title: data.title } };

  marker.addTo(categories[data.category]);
  return marker;
}

// === Marker laden aus JSON ===
var allMarkers = [];
fetch('markers.json')
  .then(response => response.json())
  .then(data => {
    data.forEach(item => {
      var m = createMarker(item);
      allMarkers.push(m);
    });

    // Suche aktivieren
    var searchControl = new L.Control.Search({
      layer: L.featureGroup(allMarkers), // alle Marker in einer Gruppe
      propertyName: 'title',             // durchsucht "title"
      initial: false,
      zoom: 2,
      marker: false
    });
    map.addControl(searchControl);
  });

    // === Layer-Steuerung & Standardanzeige ===
    L.control.layers(baseMaps, overlayMaps).addTo(map);
    terrain.addTo(map);
    categories["Orte"].addTo(map);
    categories["Gebiete"].addTo(map);
    categories["W√§lder"].addTo(map);
    categories["Gebirge"].addTo(map);
    categories["Gew√§sser"].addTo(map);
    
    map.fitBounds(bounds);

    // === Klick-Koordinaten anzeigen ===
//    map.on('click', function(e) {
//      alert("Koordinaten: " + e.latlng);
//      console.log("Koordinaten:", e.latlng);
//    });
  </script>
</body>

</html>











